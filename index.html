<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lab Schedule Diagnostic | UW-Parkside</title>
    <style>
        :root {
            --uwp-primary: #005596;
            --uwp-secondary: #C5C9D2;
            --uwp-accent: #00703C;
            --uwp-dark: #002F5F;
            --uwp-light: #F2F2F2;
            --uwp-text: #333333;
            --uwp-text-light: #666666;
            --uwp-border: #D0D0D0;
            --uwp-hover: #003B73;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', 'Helvetica Neue', Arial, sans-serif;
        }
        
        body {
            background-color: var(--uwp-light);
            color: var(--uwp-text);
            line-height: 1.3;
            font-size: 13px;
            padding: 5px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 2px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.08);
        }
        
        .uwp-header {
            background: linear-gradient(to right, var(--uwp-primary), var(--uwp-dark));
            color: white;
            padding: 10px 15px;
            border-bottom: 3px solid var(--uwp-accent);
        }
        
        .uwp-header h1 {
            font-size: 18px;
            font-weight: 600;
            margin: 0;
        }
        
        .uwp-header p {
            font-size: 12px;
            opacity: 0.9;
            margin-top: 3px;
        }
        
        .progress-container {
            padding: 8px 15px;
            background: #f8f9fa;
            border-bottom: 1px solid var(--uwp-border);
        }
        
        .progress-bar {
            width: 100%;
            height: 4px;
            background: var(--uwp-light);
            border-radius: 2px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: var(--uwp-accent);
            width: 0%;
            transition: width 0.3s;
        }
        
        .progress-text {
            font-size: 11px;
            color: var(--uwp-text-light);
            text-align: right;
            margin-top: 2px;
        }
        
        /* Compact Diagnostic Layout */
        .diagnostic-container {
            display: flex;
            min-height: 500px;
        }
        
        /* Sections Sidebar - Fixed */
        .sections-sidebar {
            width: 180px;
            background: var(--uwp-light);
            border-right: 1px solid var(--uwp-border);
            padding: 10px 0;
            flex-shrink: 0;
        }
        
        .section-nav {
            list-style: none;
        }
        
        .section-nav li {
            margin: 0;
        }
        
        .section-nav a {
            display: block;
            padding: 6px 10px;
            color: var(--uwp-text);
            text-decoration: none;
            font-size: 12px;
            border-left: 3px solid transparent;
            transition: all 0.2s;
        }
        
        .section-nav a:hover {
            background: rgba(0, 85, 150, 0.05);
        }
        
        .section-nav a.active {
            background: rgba(0, 85, 150, 0.1);
            border-left-color: var(--uwp-primary);
            font-weight: 600;
            color: var(--uwp-primary);
        }
        
        /* Questions Area - Scrollable */
        .questions-area {
            flex: 1;
            overflow-y: auto;
            max-height: 500px;
            padding: 10px;
        }
        
        .section {
            margin-bottom: 15px;
            border: 1px solid var(--uwp-border);
            border-radius: 3px;
            overflow: hidden;
        }
        
        .section-header {
            background: linear-gradient(to right, #f8f9fa, #e9ecef);
            padding: 6px 10px;
            border-bottom: 1px solid var(--uwp-border);
            font-weight: 600;
            color: var(--uwp-primary);
            font-size: 13px;
        }
        
        /* Ultra-Compact Question Format */
        .question-row {
            display: flex;
            align-items: center;
            padding: 4px 8px;
            border-bottom: 1px solid #f0f0f0;
            min-height: 30px;
        }
        
        .question-row:nth-child(even) {
            background-color: #fcfcfc;
        }
        
        .question-text {
            flex: 1;
            padding-right: 15px;
            font-size: 12.5px;
            line-height: 1.2;
            min-width: 0;
        }
        
        /* Compact Scale - Inline with question */
        .scale-compact {
            display: flex;
            gap: 2px;
            flex-shrink: 0;
        }
        
        .scale-option {
            display: flex;
            align-items: center;
            margin-left: 3px;
        }
        
        .scale-option input[type="radio"] {
            margin: 0 2px 0 0;
            transform: scale(0.9);
        }
        
        .scale-label {
            font-size: 11px;
            color: var(--uwp-text-light);
            white-space: nowrap;
        }
        
        /* Button Container */
        .button-container {
            padding: 10px 15px;
            background: #f8f9fa;
            border-top: 1px solid var(--uwp-border);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        /* UWP Buttons */
        .btn {
            background: var(--uwp-primary);
            color: white;
            border: none;
            padding: 6px 14px;
            border-radius: 2px;
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.2s;
            text-decoration: none;
        }
        
        .btn:hover {
            background: var(--uwp-hover);
        }
        
        .btn-secondary {
            background: var(--uwp-secondary);
            color: var(--uwp-text);
        }
        
        .btn-secondary:hover {
            background: #b0b4bc;
        }
        
        .btn-success {
            background: var(--uwp-accent);
        }
        
        .btn-success:hover {
            background: #005a2d;
        }
        
        /* Hidden sections */
        .hidden {
            display: none !important;
        }
        
        /* UWP Footer */
        .uwp-footer {
            margin-top: 15px;
            padding: 10px 15px;
            background: #f8f9fa;
            border-top: 1px solid var(--uwp-border);
            font-size: 11px;
            color: var(--uwp-text-light);
            text-align: center;
        }
        
        @media (max-width: 768px) {
            .diagnostic-container {
                flex-direction: column;
                min-height: auto;
            }
            
            .sections-sidebar {
                width: 100%;
                border-right: none;
                border-bottom: 1px solid var(--uwp-border);
                padding: 5px 0;
            }
            
            .section-nav {
                display: flex;
                overflow-x: auto;
                padding: 0 5px;
            }
            
            .section-nav li {
                flex-shrink: 0;
            }
            
            .section-nav a {
                padding: 4px 8px;
                border-left: none;
                border-bottom: 2px solid transparent;
            }
            
            .section-nav a.active {
                border-left: none;
                border-bottom: 2px solid var(--uwp-primary);
            }
            
            .questions-area {
                max-height: 400px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- UWP Header -->
        <div class="uwp-header">
            <h1>Lab Schedule Diagnostic</h1>
            <p>University of Wisconsin-Parkside ‚Ä¢ Personal Scheduling Analysis</p>
        </div>
        
        <!-- Progress Bar -->
        <div class="progress-container">
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            <div class="progress-text">Section <span id="currentSection">A</span> of 5 ‚Ä¢ <span id="questionsComplete">0</span>/25 questions answered</div>
        </div>
        
        <!-- Main Diagnostic Container - VISIBLE BY DEFAULT -->
        <div class="diagnostic-container" id="mainDiagnostic">
            <!-- Sections Sidebar -->
            <div class="sections-sidebar">
                <ul class="section-nav">
                    <li><a href="#" class="active" data-section="A">A. Time Volatility</a></li>
                    <li><a href="#" data-section="B">B. Planning Skills</a></li>
                    <li><a href="#" data-section="C">C. Study Strategies</a></li>
                    <li><a href="#" data-section="D">D. Attention & Focus</a></li>
                    <li><a href="#" data-section="E">E. Access & Identity</a></li>
                </ul>
            </div>
            
            <!-- Questions Area -->
            <div class="questions-area" id="questionsArea">
                <!-- Section A (default visible) -->
                <div class="section" id="sectionA">
                    <div class="section-header">
                        Section A: Time Volatility & External Constraints
                        <span style="float:right; font-weight:normal; font-size:11px;">
                            Score: <span id="scoreA">0</span>/21
                        </span>
                    </div>
                    
                    <!-- Questions will be generated here -->
                    <div id="questionsSectionA"></div>
                </div>
                
                <!-- Other sections (hidden by default) -->
                <div class="section hidden" id="sectionB">
                    <div class="section-header">
                        Section B: Planning & Time Estimation Skills
                        <span style="float:right; font-weight:normal; font-size:11px;">
                            Score: <span id="scoreB">0</span>/12
                        </span>
                    </div>
                    <div id="questionsSectionB"></div>
                </div>
                
                <div class="section hidden" id="sectionC">
                    <div class="section-header">
                        Section C: Study Strategies & Academic Know-How
                        <span style="float:right; font-weight:normal; font-size:11px;">
                            Score: <span id="scoreC">0</span>/12
                        </span>
                    </div>
                    <div id="questionsSectionC"></div>
                </div>
                
                <div class="section hidden" id="sectionD">
                    <div class="section-header">
                        Section D: Motivation, Attention, & Mental Load
                        <span style="float:right; font-weight:normal; font-size:11px;">
                            Score: <span id="scoreD">0</span>/15
                        </span>
                    </div>
                    <div id="questionsSectionD"></div>
                </div>
                
                <div class="section hidden" id="sectionE">
                    <div class="section-header">
                        Section E: Access, Identity, & Learning Differences
                        <span style="float:right; font-weight:normal; font-size:11px;">
                            Score: <span id="scoreE">0</span>/12
                        </span>
                    </div>
                    <div id="questionsSectionE"></div>
                </div>
            </div>
        </div>
        
        <!-- Button Container -->
        <div class="button-container">
            <div>
                <button class="btn-secondary" id="saveProgress">Save Progress</button>
                <button class="btn-secondary" id="clearSection">Clear Section</button>
            </div>
            <div>
                <button class="btn-secondary" id="prevSection" disabled>‚Üê Previous Section</button>
                <button class="btn" id="nextSection">Next Section ‚Üí</button>
                <button class="btn-success hidden" id="viewResults">View Results & Recommendations</button>
            </div>
        </div>
        
        <!-- Results Page (Hidden by default) -->
        <div class="hidden" id="resultsPage">
            <!-- Results content would go here -->
            <div style="padding:15px;">
                <h2 style="color:var(--uwp-primary);">Results will appear here when you complete the diagnostic</h2>
            </div>
        </div>
        
        <!-- UWP Footer -->
        <div class="uwp-footer">
            University of Wisconsin-Parkside ‚Ä¢ Student Success Initiative
            <br>
            <span style="font-size:10px;">¬© 2024 UW-Parkside. Personalized scheduling analysis powered by constraint-based assessment.</span>
        </div>
    </div>

    <script>
        // Question Data - All 25 questions
        const questions = {
            A: [
                "My weekly workload changes significantly from one week to the next.",
                "My job, internship, or extracurricular activities have irregular hours.",
                "Social or family responsibilities frequently disrupt my planned study time.",
                "My class schedule includes rotating labs, recitations, or variable meeting times.",
                "Commuting or transportation takes time and energy I can't always predict.",
                "Multiple exams or major assignments tend to cluster in the same weeks.",
                "I have caregiving responsibilities that affect when or how long I can study."
            ],
            B: [
                "I often underestimate how long assignments or studying will take.",
                "I plan study time without accounting for fatigue or transition time.",
                "I feel guilty or stressed when I can't follow a study plan exactly.",
                "I struggle to decide *what* to study during a scheduled session.",
                "I rely on last-minute studying because it has worked for me before."
            ],
            C: [
                "I'm unsure which study methods actually improve long-term learning.",
                "I default to rereading, highlighting, or cramming before exams.",
                "I don't always understand what instructors expect me to know for exams.",
                "I wait to study because I'm not sure what content is most important."
            ],
            D: [
                "I procrastinate even when I've scheduled study time.",
                "Digital distractions (phone, apps, games) derail my study sessions.",
                "I feel mentally drained before I even start studying.",
                "I worry that strict schedules will increase my stress or burnout.",
                "My sleep schedule is irregular, which affects my focus and energy."
            ],
            E: [
                "I don't always have reliable access to quiet space, technology, or internet.",
                "I have ADHD, anxiety, or other learning differences that affect time perception or focus.",
                "I feel pressure to 'handle everything on my own,' even when struggling.",
                "I sometimes question whether I belong or am 'cut out' for college."
            ]
        };
        
        const sectionMaxScores = {
            A: 21, // 7 questions * 3 max
            B: 15, // 5 questions * 3 max
            C: 12, // 4 questions * 3 max
            D: 15, // 5 questions * 3 max
            E: 12  // 4 questions * 3 max
        };
        
        // Initialize scores
        let scores = { A: 0, B: 0, C: 0, D: 0, E: 0 };
        let answers = {};
        let currentSection = 'A';
        
        // Generate all questions on page load
        function generateQuestions() {
            for (const section in questions) {
                const container = document.getElementById(`questionsSection${section}`);
                container.innerHTML = '';
                
                questions[section].forEach((question, index) => {
                    const questionNum = getQuestionNumber(section, index);
                    const row = document.createElement('div');
                    row.className = 'question-row';
                    row.id = `q${questionNum}`;
                    
                    row.innerHTML = `
                        <div class="question-text">
                            ${questionNum}. ${question}
                        </div>
                        <div class="scale-compact">
                            <div class="scale-option">
                                <input type="radio" name="q${questionNum}" value="0" id="q${questionNum}_0">
                                <label class="scale-label" for="q${questionNum}_0">0</label>
                            </div>
                            <div class="scale-option">
                                <input type="radio" name="q${questionNum}" value="1" id="q${questionNum}_1">
                                <label class="scale-label" for="q${questionNum}_1">1</label>
                            </div>
                            <div class="scale-option">
                                <input type="radio" name="q${questionNum}" value="2" id="q${questionNum}_2">
                                <label class="scale-label" for="q${questionNum}_2">2</label>
                            </div>
                            <div class="scale-option">
                                <input type="radio" name="q${questionNum}" value="3" id="q${questionNum}_3">
                                <label class="scale-label" for="q${questionNum}_3">3</label>
                            </div>
                        </div>
                    `;
                    
                    // Add event listener to radio buttons
                    const radios = row.querySelectorAll('input[type="radio"]');
                    radios.forEach(radio => {
                        radio.addEventListener('change', function() {
                            updateScore(section, questionNum, parseInt(this.value));
                            updateProgress();
                        });
                    });
                    
                    container.appendChild(row);
                });
            }
            
            // Load saved progress if available
            loadProgress();
        }
        
        // Calculate question number across all sections
        function getQuestionNumber(section, index) {
            const sectionOffsets = { A: 1, B: 8, C: 13, D: 17, E: 22 };
            return sectionOffsets[section] + index;
        }
        
        // Update score for a section
        function updateScore(section, questionNum, value) {
            // Store answer
            answers[questionNum] = value;
            
            // Recalculate section score
            let sectionScore = 0;
            const startQ = section === 'A' ? 1 : 
                          section === 'B' ? 8 :
                          section === 'C' ? 13 :
                          section === 'D' ? 17 : 22;
            const endQ = startQ + questions[section].length - 1;
            
            for (let q = startQ; q <= endQ; q++) {
                sectionScore += answers[q] || 0;
            }
            
            scores[section] = sectionScore;
            document.getElementById(`score${section}`).textContent = sectionScore;
        }
        
        // Update progress bar and counters
        function updateProgress() {
            // Calculate answered questions
            let answered = 0;
            let total = 25; // Total questions
            
            for (let i = 1; i <= total; i++) {
                if (answers[i] !== undefined) answered++;
            }
            
            // Update progress bar
            const progressPercent = (answered / total) * 100;
            document.getElementById('progressFill').style.width = `${progressPercent}%`;
            document.getElementById('questionsComplete').textContent = answered;
            
            // Show/hide results button
            if (answered === total) {
                document.getElementById('viewResults').classList.remove('hidden');
                document.getElementById('nextSection').classList.add('hidden');
            } else {
                document.getElementById('viewResults').classList.add('hidden');
                document.getElementById('nextSection').classList.remove('hidden');
            }
        }
        
        // Navigate between sections
        function navigateToSection(section) {
            // Hide all sections
            document.querySelectorAll('.section').forEach(el => {
                el.classList.add('hidden');
            });
            
            // Show selected section
            document.getElementById(`section${section}`).classList.remove('hidden');
            
            // Update active nav
            document.querySelectorAll('.section-nav a').forEach(link => {
                link.classList.remove('active');
                if (link.dataset.section === section) {
                    link.classList.add('active');
                }
            });
            
            // Update current section
            currentSection = section;
            document.getElementById('currentSection').textContent = section;
            
            // Update button states
            document.getElementById('prevSection').disabled = (section === 'A');
            
            // Scroll to top of questions area
            document.getElementById('questionsArea').scrollTop = 0;
        }
        
        // Save progress to localStorage
        function saveProgress() {
            const progress = {
                scores: scores,
                answers: answers,
                timestamp: new Date().toISOString()
            };
            localStorage.setItem('uwpScheduleDiagnostic', JSON.stringify(progress));
            
            // Show temporary confirmation
            const btn = document.getElementById('saveProgress');
            const originalText = btn.textContent;
            btn.textContent = 'Saved!';
            btn.style.background = 'var(--uwp-accent)';
            setTimeout(() => {
                btn.textContent = originalText;
                btn.style.background = '';
            }, 1500);
        }
        
        // Load progress from localStorage
        function loadProgress() {
            const saved = localStorage.getItem('uwpScheduleDiagnostic');
            if (saved) {
                try {
                    const progress = JSON.parse(saved);
                    scores = progress.scores || scores;
                    answers = progress.answers || answers;
                    
                    // Restore radio button states
                    for (const [questionNum, value] of Object.entries(answers)) {
                        const radio = document.querySelector(`input[name="q${questionNum}"][value="${value}"]`);
                        if (radio) {
                            radio.checked = true;
                        }
                    }
                    
                    // Update displays
                    updateProgress();
                    for (const section in scores) {
                        document.getElementById(`score${section}`).textContent = scores[section];
                    }
                } catch (e) {
                    console.error('Error loading saved progress:', e);
                }
            }
        }
        
        // Clear current section
        function clearCurrentSection() {
            if (confirm(`Clear all answers in Section ${currentSection}?`)) {
                const startQ = currentSection === 'A' ? 1 : 
                              currentSection === 'B' ? 8 :
                              currentSection === 'C' ? 13 :
                              currentSection === 'D' ? 17 : 22;
                const endQ = startQ + questions[currentSection].length - 1;
                
                for (let q = startQ; q <= endQ; q++) {
                    delete answers[q];
                    const radios = document.querySelectorAll(`input[name="q${q}"]`);
                    radios.forEach(radio => radio.checked = false);
                }
                
                scores[currentSection] = 0;
                document.getElementById(`score${currentSection}`).textContent = '0';
                updateProgress();
            }
        }
        
        // Show results page
        function showResults() {
            document.getElementById('mainDiagnostic').classList.add('hidden');
            document.querySelector('.button-container').classList.add('hidden');
            document.getElementById('resultsPage').classList.remove('hidden');
            
            // Generate personalized results
            generatePersonalizedResults();
        }
        
        // Generate personalized results (simplified version for now)
        function generatePersonalizedResults() {
            const totalScore = Object.values(scores).reduce((a, b) => a + b, 0);
            
            // Determine primary challenge
            let highestScore = 0;
            let primaryChallenge = '';
            for (const section in scores) {
                if (scores[section] > highestScore) {
                    highestScore = scores[section];
                    primaryChallenge = section;
                }
            }
            
            const challengeNames = {
                A: 'Time Volatility & External Constraints',
                B: 'Planning & Time Estimation Skills',
                C: 'Study Strategies & Academic Know-How',
                D: 'Motivation, Attention, & Mental Load',
                E: 'Access, Identity, & Learning Differences'
            };
            
            // Create results HTML
            const resultsHTML = `
                <div style="padding:15px;">
                    <h2 style="color:var(--uwp-primary); border-bottom:2px solid var(--uwp-primary); padding-bottom:10px; margin-bottom:15px;">
                        Your Personal Scheduling Analysis
                    </h2>
                    
                    <div style="background:#f8f9fa; padding:15px; border-radius:4px; margin-bottom:15px;">
                        <h3 style="color:var(--uwp-primary); margin-bottom:10px;">üìä Your Scores Summary</h3>
                        <p>Total Score: <strong>${totalScore}/72</strong></p>
                        <p>Primary Challenge Area: <strong>${challengeNames[primaryChallenge]}</strong></p>
                    </div>
                    
                    <div style="margin-bottom:15px;">
                        <h3 style="color:var(--uwp-primary); margin-bottom:10px;">üéØ Personalized Insight</h3>
                        <p>Based on your responses, your main scheduling challenge is <strong>${challengeNames[primaryChallenge].toLowerCase()}</strong>. This means standard scheduling advice might not work well for you.</p>
                        
                        <div style="background:#FFF3CD; padding:10px; border-left:4px solid #FFC107; margin:10px 0;">
                            <strong>Key Takeaway:</strong> Your scheduling struggles are likely due to a <em>system mismatch</em>, not a personal flaw. You need a system designed for your specific constraints.
                        </div>
                    </div>
                    
                    <div style="margin-bottom:15px;">
                        <h3 style="color:var(--uwp-primary); margin-bottom:10px;">üöÄ Recommended Actions</h3>
                        <ul style="padding-left:20px;">
                            <li style="margin-bottom:5px;">Focus on building flexibility into your schedule</li>
                            <li style="margin-bottom:5px;">Anchor your week around your Tuesday lab (2:00-4:50)</li>
                            <li style="margin-bottom:5px;">Use the lab-centered design principles</li>
                        </ul>
                    </div>
                    
                    <div style="text-align:center; margin-top:20px;">
                        <button class="btn" onclick="window.location.reload()">Retake Diagnostic</button>
                        <button class="btn-success" onclick="saveProgress()">Save My Results</button>
                    </div>
                </div>
            `;
            
            document.getElementById('resultsPage').innerHTML = resultsHTML;
        }
        
        // Event Listeners
        document.addEventListener('DOMContentLoaded', function() {
            generateQuestions();
            updateProgress();
            
            // Section navigation
            document.querySelectorAll('.section-nav a').forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    navigateToSection(this.dataset.section);
                });
            });
            
            // Next/Previous buttons
            document.getElementById('nextSection').addEventListener('click', function() {
                const nextSection = String.fromCharCode(currentSection.charCodeAt(0) + 1);
                if (nextSection <= 'E') {
                    navigateToSection(nextSection);
                }
            });
            
            document.getElementById('prevSection').addEventListener('click', function() {
                const prevSection = String.fromCharCode(currentSection.charCodeAt(0) - 1);
                if (prevSection >= 'A') {
                    navigateToSection(prevSection);
                }
            });
            
            // Action buttons
            document.getElementById('saveProgress').addEventListener('click', saveProgress);
            document.getElementById('clearSection').addEventListener('click', clearCurrentSection);
            document.getElementById('viewResults').addEventListener('click', showResults);
            
            // Keyboard shortcuts
            document.addEventListener('keydown', function(e) {
                // Ctrl+S to save
                if (e.ctrlKey && e.key === 's') {
                    e.preventDefault();
                    saveProgress();
                }
                // Number keys 1-5 to navigate sections
                if (e.key >= '1' && e.key <= '5') {
                    const sections = ['A', 'B', 'C', 'D', 'E'];
                    navigateToSection(sections[parseInt(e.key) - 1]);
                }
            });
        });
    </script>
</body>
</html>
