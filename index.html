<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lab Schedule Diagnostic | UW-Parkside</title>
    <style>
        :root {
            --uwp-primary: #005596; /* UW System Blue */
            --uwp-secondary: #C5C9D2; /* Gray */
            --uwp-accent: #00703C; /* Green */
            --uwp-dark: #002F5F; /* Dark Blue */
            --uwp-light: #F2F2F2; /* Light Gray */
            --uwp-text: #333333; /* Dark Text */
            --uwp-text-light: #666666; /* Medium Text */
            --uwp-border: #D0D0D0; /* Border Gray */
            --uwp-hover: #003B73; /* Hover Blue */
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', 'Helvetica Neue', Arial, sans-serif;
        }
        
        body {
            background-color: var(--uwp-light);
            color: var(--uwp-text);
            line-height: 1.3;
            font-size: 13px;
            padding: 5px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 2px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.08);
        }
        
        /* UWP Header */
        .uwp-header {
            background: linear-gradient(to right, var(--uwp-primary), var(--uwp-dark));
            color: white;
            padding: 10px 15px;
            border-bottom: 3px solid var(--uwp-accent);
        }
        
        .uwp-header h1 {
            font-size: 18px;
            font-weight: 600;
            margin: 0;
        }
        
        .uwp-header p {
            font-size: 12px;
            opacity: 0.9;
            margin-top: 3px;
        }
        
        /* Progress Bar */
        .progress-container {
            padding: 8px 15px;
            background: #f8f9fa;
            border-bottom: 1px solid var(--uwp-border);
        }
        
        .progress-bar {
            width: 100%;
            height: 4px;
            background: var(--uwp-light);
            border-radius: 2px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: var(--uwp-accent);
            width: 0%;
            transition: width 0.3s;
        }
        
        .progress-text {
            font-size: 11px;
            color: var(--uwp-text-light);
            text-align: right;
            margin-top: 2px;
        }
        
        /* Compact Diagnostic Layout */
        .diagnostic-container {
            display: flex;
            min-height: 500px;
        }
        
        /* Sections Sidebar - Fixed */
        .sections-sidebar {
            width: 180px;
            background: var(--uwp-light);
            border-right: 1px solid var(--uwp-border);
            padding: 10px 0;
            flex-shrink: 0;
        }
        
        .section-nav {
            list-style: none;
        }
        
        .section-nav li {
            margin: 0;
        }
        
        .section-nav a {
            display: block;
            padding: 6px 10px;
            color: var(--uwp-text);
            text-decoration: none;
            font-size: 12px;
            border-left: 3px solid transparent;
            transition: all 0.2s;
        }
        
        .section-nav a:hover {
            background: rgba(0, 85, 150, 0.05);
        }
        
        .section-nav a.active {
            background: rgba(0, 85, 150, 0.1);
            border-left-color: var(--uwp-primary);
            font-weight: 600;
            color: var(--uwp-primary);
        }
        
        /* Questions Area - Scrollable */
        .questions-area {
            flex: 1;
            overflow-y: auto;
            max-height: 500px;
            padding: 10px;
        }
        
        .section {
            margin-bottom: 15px;
            border: 1px solid var(--uwp-border);
            border-radius: 3px;
            overflow: hidden;
        }
        
        .section-header {
            background: linear-gradient(to right, #f8f9fa, #e9ecef);
            padding: 6px 10px;
            border-bottom: 1px solid var(--uwp-border);
            font-weight: 600;
            color: var(--uwp-primary);
            font-size: 13px;
        }
        
        /* Ultra-Compact Question Format */
        .question-row {
            display: flex;
            align-items: center;
            padding: 4px 8px;
            border-bottom: 1px solid #f0f0f0;
            min-height: 30px;
        }
        
        .question-row:nth-child(even) {
            background-color: #fcfcfc;
        }
        
        .question-text {
            flex: 1;
            padding-right: 15px;
            font-size: 12.5px;
            line-height: 1.2;
            min-width: 0; /* Important for text truncation */
        }
        
        /* Compact Scale - Inline with question */
        .scale-compact {
            display: flex;
            gap: 2px;
            flex-shrink: 0;
        }
        
        .scale-option {
            display: flex;
            align-items: center;
            margin-left: 3px;
        }
        
        .scale-option input[type="radio"] {
            margin: 0 2px 0 0;
            transform: scale(0.9);
        }
        
        .scale-label {
            font-size: 11px;
            color: var(--uwp-text-light);
            white-space: nowrap;
        }
        
        /* Button Container */
        .button-container {
            padding: 10px 15px;
            background: #f8f9fa;
            border-top: 1px solid var(--uwp-border);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        /* UWP Buttons */
        .btn {
            background: var(--uwp-primary);
            color: white;
            border: none;
            padding: 6px 14px;
            border-radius: 2px;
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.2s;
            text-decoration: none;
        }
        
        .btn:hover {
            background: var(--uwp-hover);
        }
        
        .btn-secondary {
            background: var(--uwp-secondary);
            color: var(--uwp-text);
        }
        
        .btn-secondary:hover {
            background: #b0b4bc;
        }
        
        .btn-success {
            background: var(--uwp-accent);
        }
        
        .btn-success:hover {
            background: #005a2d;
        }
        
        /* Results Page */
        .results-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 10px;
            padding: 10px;
        }
        
        .result-card {
            background: white;
            border: 1px solid var(--uwp-border);
            border-radius: 3px;
            padding: 10px;
            font-size: 12px;
        }
        
        .result-card h4 {
            color: var(--uwp-primary);
            margin-bottom: 5px;
            font-size: 13px;
        }
        
        /* UWP Footer */
        .uwp-footer {
            margin-top: 15px;
            padding: 10px 15px;
            background: #f8f9fa;
            border-top: 1px solid var(--uwp-border);
            font-size: 11px;
            color: var(--uwp-text-light);
            text-align: center;
        }
        
        /* Hidden sections */
        .hidden {
            display: none !important;
        }
        
        /* Tooltip for scale */
        .tooltip {
            position: relative;
            display: inline-block;
            cursor: help;
            border-bottom: 1px dotted var(--uwp-text-light);
        }
        
        .tooltip .tooltiptext {
            visibility: hidden;
            width: 200px;
            background-color: var(--uwp-dark);
            color: white;
            text-align: center;
            padding: 5px;
            border-radius: 3px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            margin-left: -100px;
            font-size: 11px;
            opacity: 0;
            transition: opacity 0.3s;
        }
        
        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }
        
        /* Stats summary */
        .stats-summary {
            display: flex;
            gap: 15px;
            padding: 8px 10px;
            background: #f8f9fa;
            border-radius: 2px;
            margin-bottom: 10px;
            font-size: 12px;
        }
        
        .stat-item {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .stat-value {
            font-weight: 600;
            color: var(--uwp-primary);
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- UWP Header -->
        <div class="uwp-header">
            <h1>Lab Schedule Diagnostic</h1>
            <p>University of Wisconsin-Parkside • Identify system mismatches in your study schedule</p>
        </div>
        
        <!-- Progress Bar -->
        <div class="progress-container">
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            <div class="progress-text">Section <span id="currentSection">A</span> of 5 • <span id="questionsComplete">0</span>/25 questions answered</div>
        </div>
        
        <!-- Main Diagnostic Container -->
        <div class="diagnostic-container">
            <!-- Sections Sidebar -->
            <div class="sections-sidebar">
                <ul class="section-nav">
                    <li><a href="#" class="active" data-section="A">A. Time Volatility</a></li>
                    <li><a href="#" data-section="B">B. Planning Skills</a></li>
                    <li><a href="#" data-section="C">C. Study Strategies</a></li>
                    <li><a href="#" data-section="D">D. Attention & Focus</a></li>
                    <li><a href="#" data-section="E">E. Access & Identity</a></li>
                </ul>
            </div>
            
            <!-- Questions Area -->
            <div class="questions-area" id="questionsArea">
                <!-- Section A (default visible) -->
                <div class="section" id="sectionA">
                    <div class="section-header">
                        Section A: Time Volatility & External Constraints
                        <span style="float:right; font-weight:normal; font-size:11px;">
                            Score: <span id="scoreA">0</span>/21
                        </span>
                    </div>
                    
                    <!-- Questions will be generated here -->
                    <div id="questionsSectionA"></div>
                </div>
                
                <!-- Other sections (hidden by default) -->
                <div class="section hidden" id="sectionB">
                    <div class="section-header">
                        Section B: Planning & Time Estimation Skills
                        <span style="float:right; font-weight:normal; font-size:11px;">
                            Score: <span id="scoreB">0</span>/12
                        </span>
                    </div>
                    <div id="questionsSectionB"></div>
                </div>
                
                <div class="section hidden" id="sectionC">
                    <div class="section-header">
                        Section C: Study Strategies & Academic Know-How
                        <span style="float:right; font-weight:normal; font-size:11px;">
                            Score: <span id="scoreC">0</span>/12
                        </span>
                    </div>
                    <div id="questionsSectionC"></div>
                </div>
                
                <div class="section hidden" id="sectionD">
                    <div class="section-header">
                        Section D: Motivation, Attention, & Mental Load
                        <span style="float:right; font-weight:normal; font-size:11px;">
                            Score: <span id="scoreD">0</span>/15
                        </span>
                    </div>
                    <div id="questionsSectionD"></div>
                </div>
                
                <div class="section hidden" id="sectionE">
                    <div class="section-header">
                        Section E: Access, Identity, & Learning Differences
                        <span style="float:right; font-weight:normal; font-size:11px;">
                            Score: <span id="scoreE">0</span>/12
                        </span>
                    </div>
                    <div id="questionsSectionE"></div>
                </div>
            </div>
        </div>
        
        <!-- Button Container -->
        <div class="button-container">
            <div>
                <button class="btn-secondary" id="saveProgress">Save Progress</button>
                <button class="btn-secondary" id="clearSection">Clear Section</button>
            </div>
            <div>
                <button class="btn-secondary" id="prevSection" disabled>← Previous Section</button>
                <button class="btn" id="nextSection">Next Section →</button>
                <button class="btn-success hidden" id="viewResults">View Results & Recommendations</button>
            </div>
        </div>
        
        <!-- Results Page (Hidden) -->
        <div class="hidden" id="resultsPage">
            <div style="padding:15px;">
                <h2 style="color:var(--uwp-primary); border-bottom:1px solid var(--uwp-border); padding-bottom:5px; margin-bottom:10px;">
                    Diagnostic Results & Recommendations
                </h2>
                
                <!-- Stats Summary -->
                <div class="stats-summary">
                    <div class="stat-item">
                        <span>Total Score:</span>
                        <span class="stat-value" id="totalScore">0</span>/72
                    </div>
                    <div class="stat-item">
                        <span>Primary Challenge:</span>
                        <span class="stat-value" id="primaryChallenge">None</span>
                    </div>
                    <div class="stat-item">
                        <span>Situation Type:</span>
                        <span class="stat-value" id="situationType">Undetermined</span>
                    </div>
                </div>
                
                <!-- Results Grid -->
                <div class="results-grid">
                    <div class="result-card">
                        <h4>Section A: Time Volatility</h4>
                        <p>Score: <strong id="finalScoreA">0</strong>/21</p>
                        <p style="margin-top:5px; font-size:11px; color:var(--uwp-accent);">
                            <strong>Insight:</strong> High scores indicate fixed, rigid schedules are likely to fail for you.
                        </p>
                    </div>
                    
                    <div class="result-card">
                        <h4>Section B: Planning Skills</h4>
                        <p>Score: <strong id="finalScoreB">0</strong>/12</p>
                        <p style="margin-top:5px; font-size:11px; color:var(--uwp-accent);">
                            <strong>Insight:</strong> High scores suggest a planning mismatch, not laziness.
                        </p>
                    </div>
                    
                    <div class="result-card">
                        <h4>Section C: Study Strategies</h4>
                        <p>Score: <strong id="finalScoreC">0</strong>/12</p>
                        <p style="margin-top:5px; font-size:11px; color:var(--uwp-accent);">
                            <strong>Insight:</strong> High scores mean scheduling alone won't help—you need strategy clarity.
                        </p>
                    </div>
                    
                    <div class="result-card">
                        <h4>Section D: Attention & Focus</h4>
                        <p>Score: <strong id="finalScoreD">0</strong>/15</p>
                        <p style="margin-top:5px; font-size:11px; color:var(--uwp-accent);">
                            <strong>Insight:</strong> High scores point to cognitive constraints, not lack of effort.
                        </p>
                    </div>
                    
                    <div class="result-card">
                        <h4>Section E: Access & Identity</h4>
                        <p>Score: <strong id="finalScoreE">0</strong>/12</p>
                        <p style="margin-top:5px; font-size:11px; color:var(--uwp-accent);">
                            <strong>Insight:</strong> High scores indicate standard advice may not fit your reality.
                        </p>
                    </div>
                </div>
                
                <!-- Recommendations -->
                <div style="margin-top:15px; padding:10px; background:#f8f9fa; border-radius:3px; border-left:3px solid var(--uwp-primary);">
                    <h4 style="color:var(--uwp-primary); margin-bottom:8px;">Personalized Recommendations</h4>
                    <div id="recommendations">
                        <p>Complete the diagnostic to see personalized recommendations.</p>
                    </div>
                </div>
                
                <!-- Action Buttons -->
                <div style="margin-top:15px; text-align:center;">
                    <button class="btn" id="generateSchedule">Generate Lab-Centered Schedule</button>
                    <button class="btn-secondary" id="retakeDiagnostic">Retake Diagnostic</button>
                    <button class="btn-secondary" id="downloadResults">Download Results (PDF)</button>
                </div>
            </div>
        </div>
        
        <!-- UWP Footer -->
        <div class="uwp-footer">
            University of Wisconsin-Parkside • This diagnostic is part of the Student Success Initiative
            <br>
            <span style="font-size:10px;">© 2024 UW-Parkside. "Scheduling failure is rarely a character flaw—it's usually a systems mismatch."</span>
        </div>
    </div>

    <script>
        // Question Data - All 25 questions compactly organized
        const questions = {
            A: [
                "My weekly workload changes significantly from one week to the next.",
                "My job, internship, or extracurricular activities have irregular hours.",
                "Social or family responsibilities frequently disrupt my planned study time.",
                "My class schedule includes rotating labs, recitations, or variable meeting times.",
                "Commuting or transportation takes time and energy I can't always predict.",
                "Multiple exams or major assignments tend to cluster in the same weeks.",
                "I have caregiving responsibilities that affect when or how long I can study."
            ],
            B: [
                "I often underestimate how long assignments or studying will take.",
                "I plan study time without accounting for fatigue or transition time.",
                "I feel guilty or stressed when I can't follow a study plan exactly.",
                "I struggle to decide *what* to study during a scheduled session.",
                "I rely on last-minute studying because it has worked for me before."
            ],
            C: [
                "I'm unsure which study methods actually improve long-term learning.",
                "I default to rereading, highlighting, or cramming before exams.",
                "I don't always understand what instructors expect me to know for exams.",
                "I wait to study because I'm not sure what content is most important."
            ],
            D: [
                "I procrastinate even when I've scheduled study time.",
                "Digital distractions (phone, apps, games) derail my study sessions.",
                "I feel mentally drained before I even start studying.",
                "I worry that strict schedules will increase my stress or burnout.",
                "My sleep schedule is irregular, which affects my focus and energy."
            ],
            E: [
                "I don't always have reliable access to quiet space, technology, or internet.",
                "I have ADHD, anxiety, or other learning differences that affect time perception or focus.",
                "I feel pressure to 'handle everything on my own,' even when struggling.",
                "I sometimes question whether I belong or am 'cut out' for college."
            ]
        };
        
        const sectionMaxScores = {
            A: 21, // 7 questions * 3 max
            B: 15, // 5 questions * 3 max
            C: 12, // 4 questions * 3 max
            D: 15, // 5 questions * 3 max
            E: 12  // 4 questions * 3 max
        };
        
        // Initialize scores
        let scores = { A: 0, B: 0, C: 0, D: 0, E: 0 };
        let answers = {};
        let currentSection = 'A';
        
        // Generate all questions on page load
        function generateQuestions() {
            for (const section in questions) {
                const container = document.getElementById(`questionsSection${section}`);
                container.innerHTML = '';
                
                questions[section].forEach((question, index) => {
                    const questionNum = getQuestionNumber(section, index);
                    const row = document.createElement('div');
                    row.className = 'question-row';
                    row.id = `q${questionNum}`;
                    
                    row.innerHTML = `
                        <div class="question-text">
                            ${questionNum}. ${question}
                        </div>
                        <div class="scale-compact">
                            <div class="scale-option">
                                <input type="radio" name="q${questionNum}" value="0" id="q${questionNum}_0">
                                <label class="scale-label" for="q${questionNum}_0">0</label>
                            </div>
                            <div class="scale-option">
                                <input type="radio" name="q${questionNum}" value="1" id="q${questionNum}_1">
                                <label class="scale-label" for="q${questionNum}_1">1</label>
                            </div>
                            <div class="scale-option">
                                <input type="radio" name="q${questionNum}" value="2" id="q${questionNum}_2">
                                <label class="scale-label" for="q${questionNum}_2">2</label>
                            </div>
                            <div class="scale-option">
                                <input type="radio" name="q${questionNum}" value="3" id="q${questionNum}_3">
                                <label class="scale-label" for="q${questionNum}_3">3</label>
                            </div>
                        </div>
                    `;
                    
                    // Add event listener to radio buttons
                    const radios = row.querySelectorAll('input[type="radio"]');
                    radios.forEach(radio => {
                        radio.addEventListener('change', function() {
                            updateScore(section, questionNum, parseInt(this.value));
                            updateProgress();
                        });
                    });
                    
                    container.appendChild(row);
                });
            }
            
            // Load saved progress if available
            loadProgress();
        }
        
        // Calculate question number across all sections
        function getQuestionNumber(section, index) {
            const sectionOffsets = { A: 1, B: 8, C: 13, D: 17, E: 22 };
            return sectionOffsets[section] + index;
        }
        
        // Update score for a section
        function updateScore(section, questionNum, value) {
            // Store answer
            answers[questionNum] = value;
            
            // Recalculate section score
            let sectionScore = 0;
            const startQ = section === 'A' ? 1 : 
                          section === 'B' ? 8 :
                          section === 'C' ? 13 :
                          section === 'D' ? 17 : 22;
            const endQ = startQ + questions[section].length - 1;
            
            for (let q = startQ; q <= endQ; q++) {
                sectionScore += answers[q] || 0;
            }
            
            scores[section] = sectionScore;
            document.getElementById(`score${section}`).textContent = sectionScore;
            
            // Update total if on results page
            if (document.getElementById('resultsPage').classList.contains('hidden') === false) {
                updateResultsDisplay();
            }
        }
        
        // Update progress bar and counters
        function updateProgress() {
            // Calculate answered questions
            let answered = 0;
            let total = 25; // Total questions
            
            for (let i = 1; i <= total; i++) {
                if (answers[i] !== undefined) answered++;
            }
            
            // Update progress bar
            const progressPercent = (answered / total) * 100;
            document.getElementById('progressFill').style.width = `${progressPercent}%`;
            document.getElementById('questionsComplete').textContent = answered;
            
            // Update section score displays
            for (const section in scores) {
                document.getElementById(`score${section}`).textContent = scores[section];
            }
            
            // Show/hide results button
            if (answered === total) {
                document.getElementById('viewResults').classList.remove('hidden');
                document.getElementById('nextSection').classList.add('hidden');
            } else {
                document.getElementById('viewResults').classList.add('hidden');
                document.getElementById('nextSection').classList.remove('hidden');
            }
        }
        
        // Navigate between sections
        function navigateToSection(section) {
            // Hide all sections
            document.querySelectorAll('.section').forEach(el => {
                el.classList.add('hidden');
            });
            
            // Show selected section
            document.getElementById(`section${section}`).classList.remove('hidden');
            
            // Update active nav
            document.querySelectorAll('.section-nav a').forEach(link => {
                link.classList.remove('active');
                if (link.dataset.section === section) {
                    link.classList.add('active');
                }
            });
            
            // Update current section
            currentSection = section;
            document.getElementById('currentSection').textContent = section;
            
            // Update button states
            document.getElementById('prevSection').disabled = (section === 'A');
            
            // Scroll to top of questions area
            document.getElementById('questionsArea').scrollTop = 0;
        }
        
        // Save progress to localStorage
        function saveProgress() {
            const progress = {
                scores: scores,
                answers: answers,
                timestamp: new Date().toISOString()
            };
            localStorage.setItem('uwpScheduleDiagnostic', JSON.stringify(progress));
            
            // Show temporary confirmation
            const btn = document.getElementById('saveProgress');
            const originalText = btn.textContent;
            btn.textContent = 'Saved!';
            btn.style.background = 'var(--uwp-accent)';
            setTimeout(() => {
                btn.textContent = originalText;
                btn.style.background = '';
            }, 1500);
        }
        
        // Load progress from localStorage
        function loadProgress() {
            const saved = localStorage.getItem('uwpScheduleDiagnostic');
            if (saved) {
                try {
                    const progress = JSON.parse(saved);
                    scores = progress.scores || scores;
                    answers = progress.answers || answers;
                    
                    // Restore radio button states
                    for (const [questionNum, value] of Object.entries(answers)) {
                        const radio = document.querySelector(`input[name="q${questionNum}"][value="${value}"]`);
                        if (radio) {
                            radio.checked = true;
                        }
                    }
                    
                    // Update displays
                    updateProgress();
                    for (const section in scores) {
                        document.getElementById(`score${section}`).textContent = scores[section];
                    }
                } catch (e) {
                    console.error('Error loading saved progress:', e);
                }
            }
        }
        
        // Clear current section
        function clearCurrentSection() {
            if (confirm(`Clear all answers in Section ${currentSection}?`)) {
                const startQ = currentSection === 'A' ? 1 : 
                              currentSection === 'B' ? 8 :
                              currentSection === 'C' ? 13 :
                              currentSection === 'D' ? 17 : 22;
                const endQ = startQ + questions[currentSection].length - 1;
                
                for (let q = startQ; q <= endQ; q++) {
                    delete answers[q];
                    const radios = document.querySelectorAll(`input[name="q${q}"]`);
                    radios.forEach(radio => radio.checked = false);
                }
                
                scores[currentSection] = 0;
                document.getElementById(`score${currentSection}`).textContent = '0';
                updateProgress();
            }
        }
        
        // Show results page
        function showResults() {
            document.querySelector('.diagnostic-container').classList.add('hidden');
            document.querySelector('.button-container').classList.add('hidden');
            document.getElementById('resultsPage').classList.remove('hidden');
            
            updateResultsDisplay();
            generateRecommendations();
        }
        
        // Update results display
        function updateResultsDisplay() {
            const totalScore = Object.values(scores).reduce((a, b) => a + b, 0);
            document.getElementById('totalScore').textContent = totalScore;
            
            // Update individual scores
            for (const section in scores) {
                document.getElementById(`finalScore${section}`).textContent = scores[section];
            }
            
            // Determine primary challenge
            let maxScore = 0;
            let primarySection = '';
            for (const section in scores) {
                if (scores[section] > maxScore) {
                    maxScore = scores[section];
                    primarySection = section;
                }
            }
            
            const challengeNames = {
                A: 'Time Volatility',
                B: 'Planning Skills',
                C: 'Study Strategies',
                D: 'Attention & Focus',
                E: 'Access & Identity'
            };
            
            document.getElementById('primaryChallenge').textContent = 
                primarySection ? challengeNames[primarySection] : 'Balanced';
            
            // Determine situation type based on total score
            let situationType = '';
            if (totalScore >= 55) situationType = 'Volatile Week Student';
            else if (totalScore >= 45) situationType = 'Overcommitted Achiever';
            else if (totalScore >= 38) situationType = 'Last-Minute Survivor';
            else if (totalScore >= 30) situationType = 'Strategy-Deficient Student';
            else if (totalScore >= 22) situationType = 'Burned-Out / Low Bandwidth';
            else if (totalScore >= 15) situationType = 'Structurally Constrained';
            else situationType = 'Miscalibrated Optimist';
            
            document.getElementById('situationType').textContent = situationType;
        }
        
        // Generate personalized recommendations
        function generateRecommendations() {
            const totalScore = Object.values(scores).reduce((a, b) => a + b, 0);
            let recommendations = '';
            
            // Based on total score and section scores
            if (scores.A >= 14) {
                recommendations += '<p><strong>Flexible Scheduling Needed:</strong> Your schedule varies too much for fixed plans. Use modular blocks that can shift week-to-week.</p>';
            }
            
            if (scores.B >= 9) {
                recommendations += '<p><strong>Time Estimation Training:</strong> Practice estimating task durations and add 50% buffer time to all estimates.</p>';
            }
            
            if (scores.C >= 8) {
                recommendations += '<p><strong>Study Strategy Workshop:</strong> Learn evidence-based techniques like spaced repetition and retrieval practice.</p>';
            }
            
            if (scores.D >= 10) {
                recommendations += '<p><strong>Energy Management:</strong> Schedule study sessions when you have highest energy, not just when you have time.</p>';
            }
            
            if (scores.E >= 8) {
                recommendations += '<p><strong>Adaptive Systems:</strong> Standard advice may not work for you. Create a system that accommodates your specific constraints.</p>';
            }
            
            if (totalScore >= 50) {
                recommendations += '<p><strong>Lab-Centered Design Essential:</strong> Your Tuesday lab (2:00-4:50) must be the anchor of your entire week. Build everything around it.</p>';
            }
            
            if (!recommendations) {
                recommendations = '<p>Your scores indicate relatively balanced scheduling skills. Focus on maintaining consistency and refining your existing systems.</p>';
            }
            
            document.getElementById('recommendations').innerHTML = recommendations;
        }
        
        // Generate schedule (placeholder)
        function generateSchedule() {
            alert('Schedule generation feature would open a lab-centered weekly planner here. This would be implemented in Phase 2 of the project.');
        }
        
        // Download results (placeholder)
        function downloadResults() {
            alert('PDF generation would be implemented using jsPDF library for client-side PDF creation.');
        }
        
        // Event Listeners
        document.addEventListener('DOMContentLoaded', function() {
            generateQuestions();
            updateProgress();
            
            // Section navigation
            document.querySelectorAll('.section-nav a').forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    navigateToSection(this.dataset.section);
                });
            });
            
            // Next/Previous buttons
            document.getElementById('nextSection').addEventListener('click', function() {
                const nextSection = String.fromCharCode(currentSection.charCodeAt(0) + 1);
                navigateToSection(nextSection);
            });
            
            document.getElementById('prevSection').addEventListener('click', function() {
                const prevSection = String.fromCharCode(currentSection.charCodeAt(0) - 1);
                navigateToSection(prevSection);
            });
            
            // Action buttons
            document.getElementById('saveProgress').addEventListener('click', saveProgress);
            document.getElementById('clearSection').addEventListener('click', clearCurrentSection);
            document.getElementById('viewResults').addEventListener('click', showResults);
            document.getElementById('generateSchedule').addEventListener('click', generateSchedule);
            document.getElementById('downloadResults').addEventListener('click', downloadResults);
            document.getElementById('retakeDiagnostic').addEventListener('click', function() {
                if (confirm('Clear all answers and retake the diagnostic?')) {
                    localStorage.removeItem('uwpScheduleDiagnostic');
                    window.location.reload();
                }
            });
            
            // Keyboard shortcuts
            document.addEventListener('keydown', function(e) {
                // Ctrl+S to save
                if (e.ctrlKey && e.key === 's') {
                    e.preventDefault();
                    saveProgress();
                }
                // Number keys 1-5 to navigate sections
                if (e.key >= '1' && e.key <= '5') {
                    const sections = ['A', 'B', 'C', 'D', 'E'];
                    navigateToSection(sections[parseInt(e.key) - 1]);
                }
            });
        });
    </script>
</body>
</html>
